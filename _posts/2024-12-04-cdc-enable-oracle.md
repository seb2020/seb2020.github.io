---
layout: post
title: Enable CDC for Oracle
date: 2024-12-06 13:15:00
description: Enable CDC for Oracle for capturing data
tags: debezium, cdc
categories: database
featured: false
toc:
  sidebar: left
---

## Enable CDC for Oracle

```sql
ALTER DATABASE ADD SUPPLEMENTAL LOG DATA;
 
SELECT supplemental_log_data_min FROM v$database;
 
CREATE TABLESPACE logminer_tbs DATAFILE '/u02/data/<db name>/datafile/logminer_tbs.dbf' SIZE 256M REUSE AUTOEXTEND ON MAXSIZE UNLIMITED;
```

Create an Oracle user for accessing the database:

```sql
CREATE USER cdc IDENTIFIED BY "xxx" DEFAULT TABLESPACE LOGMINER_TBS QUOTA UNLIMITED ON LOGMINER_TBS ;
  
GRANT CREATE SESSION TO cdc ;
GRANT SET CONTAINER TO cdc ;
GRANT SELECT ON V_$DATABASE TO cdc ;
GRANT FLASHBACK ANY TABLE TO cdc ;
GRANT SELECT ANY TABLE TO cdc ;
GRANT SELECT_CATALOG_ROLE TO cdc ;
GRANT EXECUTE_CATALOG_ROLE TO cdc ;
GRANT SELECT ANY TRANSACTION TO cdc ;
GRANT SELECT ANY DICTIONARY TO cdc ;
GRANT LOGMINING TO cdc ;
 
GRANT CREATE TABLE TO cdc ;
GRANT LOCK ANY TABLE TO cdc ;
GRANT CREATE SEQUENCE TO cdc ;
 
GRANT EXECUTE ON DBMS_LOGMNR TO cdc ;
GRANT EXECUTE ON DBMS_LOGMNR_D TO cdc ;
 
GRANT SELECT ON V_$LOG TO cdc ;
GRANT SELECT ON V_$LOG_HISTORY TO cdc ;
GRANT SELECT ON V_$LOGMNR_LOGS TO cdc ;
GRANT SELECT ON V_$LOGMNR_CONTENTS TO cdc ;
GRANT SELECT ON V_$LOGMNR_PARAMETERS TO cdc ;
GRANT SELECT ON V_$LOGFILE TO cdc ;
GRANT SELECT ON V_$ARCHIVED_LOG TO cdc ;
GRANT SELECT ON V_$ARCHIVE_DEST_STATUS TO cdc ;
GRANT SELECT ON V_$TRANSACTION TO cdc ;
```

Enable supplemental logs for tables:

```sql
ALTER TABLE <schema>.<table> ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS
ALTER TABLE <schema>.<table> ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS
```